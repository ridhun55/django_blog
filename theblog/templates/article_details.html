{% extends 'base.html' %}
{% block title %} {{ post.title_tag }} {% endblock %}

{% block content %}

   <h1>{{post.title}}</h1>
   <small>By : {{ post.author.first_name }}{{ post.author.last_name }} 
   {% if user.is_authenticated %}
      {% if user.id == post.author.id %}
         - <a href="{% url 'update_post' post.pk %}">[ Edit ]</a></small>
         - <a href="{% url 'delete_post' post.pk %}">[ Delete ]</a></small><br/>
      {% endif %}
   {% endif %}
   
   <small>Date : {{post.post_date}}</small>
   <hr/>
   
   <p>{{ post.body|safe }}</p>

   <a class="btn btn-primary" href="{% url 'home' %}">Back</a>
      <br/><br/>

   <form action="{% url 'like_post' post.pk %}" method="POST">
      {% csrf_token %}
      {% if user.is_authenticated %}
      
         {% if liked %}
            <button type="submit", name="post_id", value="{{ post.id }}", class="btn btn-warning btn-sm">UNLIKE</button>
         {% else %}
            <button type="submit", name="post_id", value="{{ post.id }}", class="btn btn-primary btn-sm">LIKE</button>
         {% endif %}
      
      {% else %}
         <small> <a href="{% url 'login' %}">Login to Like</a> </small> 
      {% endif %}

      ==- {{ total_likes }} Likes
      
   </form>
{% endblock %}